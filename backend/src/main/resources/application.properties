# ==============================================================
# 1. CẤU HÌNH SERVER & ENCODING (QUAN TRỌNG ĐỂ SỬA LỖI FONT)
# ==============================================================
# Ép buộc HTTP request/response dùng UTF-8
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.force=true
server.servlet.encoding.enabled=true

# Cấu hình Jackson (JSON) dùng UTF-8 và đúng múi giờ Việt Nam
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Ho_Chi_Minh

# ==============================================================
# 2. CẤU HÌNH KẾT NỐI DATABASE
# ==============================================================
# URL kết nối chứa tham số fix lỗi font: sendStringParametersAsUnicode=true;characterEncoding=UTF-8
spring.datasource.url=jdbc:sqlserver://sql_container:1433;databaseName=chagee_db;encrypt=true;trustServerCertificate=true;sendStringParametersAsUnicode=true;characterEncoding=UTF-8
spring.datasource.username=sa
spring.datasource.password=Password123!
spring.datasource.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver

# ==============================================================
# 3. CẤU HÌNH JPA / HIBERNATE
# ==============================================================
# Chế độ 'update': Tự động cập nhật schema nếu code thay đổi, nhưng giữ lại dữ liệu cũ.
# (Lưu ý: Nếu muốn an toàn tuyệt đối khi chạy thật thì đổi thành 'validate')
spring.jpa.hibernate.ddl-auto=update

# Giữ nguyên tên bảng (CamelCase) như trong Entity (VD: OrderDetails thay vì order_details)
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# Chỉ định Dialect cho SQL Server (giúp Hibernate sinh SQL chuẩn hơn)
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect

# Hiển thị câu lệnh SQL trong log để dễ debug
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true